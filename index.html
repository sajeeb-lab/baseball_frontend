<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>US Elite Baseball – Find Teams</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root {
  --navy:  #0a1628;
  --red:   #c8102e;
  --red2:  #a50d25;
  --gold:  #f5c518;
  --white: #ffffff;
  --light: #f4f6f9;
  --mid:   #dce3ec;
  --text:  #1a1a2e;
  --sub:   #5a6a7a;
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'Open Sans', sans-serif; background: var(--light); color: var(--text); min-height: 100vh; }

.top-bar { background: var(--navy); padding: 6px 2rem; display: flex; justify-content: flex-end; align-items: center; gap: 1.4rem; }
.top-bar a { color: #8899bb; font-size: 0.68rem; text-decoration: none; letter-spacing: 0.07em; text-transform: uppercase; transition: color .2s; }
.top-bar a:hover { color: var(--gold); }

nav { background: var(--red); display: flex; align-items: center; justify-content: space-between; padding: 0 2rem; box-shadow: 0 3px 14px rgba(0,0,0,.28); position: sticky; top: 0; z-index: 100; }
.nav-logo { display: flex; align-items: center; gap: .75rem; padding: 10px 0; text-decoration: none; }
.logo-icon { width: 46px; height: 46px; background: var(--white); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-family: 'Oswald', sans-serif; font-weight: 700; font-size: .72rem; color: var(--red); line-height: 1.1; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,.2); flex-shrink: 0; }
.logo-text .main { display: block; font-family: 'Oswald', sans-serif; font-size: 1.2rem; font-weight: 700; color: var(--white); letter-spacing: .05em; text-transform: uppercase; line-height: 1; }
.logo-text .sub { display: block; font-size: .6rem; color: rgba(255,255,255,.7); letter-spacing: .18em; text-transform: uppercase; }
.nav-links { display: flex; list-style: none; }
.nav-links li a { display: block; padding: 18px 15px; color: var(--white); text-decoration: none; font-family: 'Oswald', sans-serif; font-size: .8rem; font-weight: 500; letter-spacing: .08em; text-transform: uppercase; border-bottom: 3px solid transparent; transition: background .18s, border-color .18s, color .18s; }
.nav-links li a:hover, .nav-links li a.active { background: rgba(0,0,0,.15); border-bottom-color: var(--gold); color: var(--gold); }

.hero { background: linear-gradient(135deg, var(--navy) 0%, #162845 100%); padding: 3rem 2rem 2.8rem; text-align: center; position: relative; overflow: hidden; }
.hero::before { content: ''; position: absolute; inset: 0; background: url("data:image/svg+xml,%3Csvg width='60' height='60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/svg%3E"); }
.hero h1 { font-family: 'Oswald', sans-serif; font-size: clamp(1.8rem, 4vw, 3rem); font-weight: 700; color: var(--white); letter-spacing: .05em; text-transform: uppercase; margin-bottom: .5rem; position: relative; }
.hero h1 span { color: var(--gold); }
.hero p { color: rgba(255,255,255,.65); font-size: .92rem; margin-bottom: 1.8rem; position: relative; }

.search-wrap { position: relative; max-width: 580px; margin: 0 auto; display: flex; }
.search-wrap input { flex: 1; padding: 14px 18px; border: 2px solid rgba(255,255,255,.15); border-right: none; border-radius: 4px 0 0 4px; background: rgba(255,255,255,.08); color: var(--white); font-family: 'Open Sans', sans-serif; font-size: .9rem; outline: none; transition: border-color .2s, background .2s; }
.search-wrap input::placeholder { color: rgba(255,255,255,.4); }
.search-wrap input:focus { border-color: var(--gold); background: rgba(255,255,255,.12); }
.search-btn { padding: 14px 22px; background: var(--gold); border: none; border-radius: 0 4px 4px 0; cursor: pointer; font-family: 'Oswald', sans-serif; font-size: .82rem; font-weight: 600; color: var(--navy); letter-spacing: .1em; text-transform: uppercase; transition: background .2s; white-space: nowrap; }
.search-btn:hover { background: #ffd330; }

.main { max-width: 1100px; margin: 0 auto; padding: 2.5rem 1.5rem 4rem; }

.filter-bar { display: flex; align-items: center; gap: .8rem; margin-bottom: 1.8rem; flex-wrap: wrap; }
.filter-bar label { font-size: .75rem; color: var(--sub); letter-spacing: .06em; text-transform: uppercase; white-space: nowrap; }
.state-filter { padding: 8px 14px; border: 1px solid var(--mid); border-radius: 4px; background: var(--white); font-family: 'Open Sans', sans-serif; font-size: .84rem; color: var(--text); outline: none; cursor: pointer; min-width: 180px; }
.state-filter:focus { border-color: var(--red); }
.clear-btn { background: none; border: 1px solid var(--mid); border-radius: 4px; padding: 8px 14px; font-size: .76rem; color: var(--sub); cursor: pointer; font-family: 'Open Sans', sans-serif; transition: all .2s; display: none; }
.clear-btn.visible { display: block; }
.clear-btn:hover { border-color: var(--red); color: var(--red); }
.result-count { margin-left: auto; font-size: .78rem; color: var(--sub); }

/* TEAMS GRID — 2 col matching screenshot */
.teams-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }

/* TEAM CARD — clean white card matching screenshot exactly */
.team-card {
  background: var(--white);
  border-radius: 10px;
  padding: 20px 22px 18px;
  border: 1px solid #e8ecf2;
  box-shadow: 0 1px 5px rgba(0,0,0,.04);
  text-decoration: none;
  display: block;
  color: inherit;
  transition: box-shadow .2s, transform .18s, border-color .18s;
}
.team-card:hover { box-shadow: 0 6px 22px rgba(0,0,0,.1); transform: translateY(-2px); border-color: #c8d0dc; }

.tc-age { font-size: .74rem; font-weight: 700; color: var(--red); letter-spacing: .02em; margin-bottom: 6px; }
.tc-name { font-size: 1rem; font-weight: 700; color: var(--text); line-height: 1.3; margin-bottom: 4px; }
.tc-state { font-size: .84rem; color: var(--sub); }

/* SKELETON */
.skeleton { background: linear-gradient(90deg,#eee 25%,#f5f5f5 50%,#eee 75%); background-size: 200% 100%; animation: shimmer 1.2s infinite; border-radius: 10px; height: 100px; }
@keyframes shimmer { from{background-position:200% 0} to{background-position:-200% 0} }

.empty-state { grid-column:1/-1; text-align:center; padding:4rem 2rem; color:var(--sub); }
.empty-state strong { display:block; font-size:1.1rem; color:var(--navy); margin-bottom:.5rem; }
.error-state { grid-column:1/-1; background:#fff5f5; border:1px solid #ffc0c0; border-radius:8px; padding:2rem; text-align:center; color:var(--red); font-size:.9rem; }
.error-state strong { display:block; margin-bottom:.4rem; }

footer { background:var(--navy); color:rgba(255,255,255,.5); text-align:center; padding:2.5rem 2rem; font-size:.72rem; letter-spacing:.08em; margin-top:3rem; }
.footer-links { display:flex; justify-content:center; flex-wrap:wrap; gap:.4rem 1.4rem; margin-bottom:1.2rem; }
.footer-links a { color:rgba(255,255,255,.45); font-size:.68rem; text-transform:uppercase; letter-spacing:.1em; text-decoration:none; transition:color .2s; }
.footer-links a:hover { color:var(--gold); }
footer a { color:var(--gold); text-decoration:none; }
footer p { line-height:1.8; }

@media (max-width:720px) {
  .teams-grid { grid-template-columns:1fr; }
  .top-bar { display:none; }
  .nav-links li a { padding:18px 10px; font-size:.72rem; }
  .main { padding:1.5rem 1rem 3rem; }
  .filter-bar { flex-direction:column; align-items:flex-start; }
  .result-count { margin-left:0; }
}
</style>
</head>
<body>

<div class="top-bar">
  <a href="#">Prospect Form</a>
  <a href="#">Coach Application</a>
  <a href="#">Mission Statement</a>
  <a href="#">Contact US Elite</a>
</div>

<nav>
  <a href="index.html" class="nav-logo">
    <div class="logo-icon">US<br>ELITE</div>
    <div class="logo-text">
      <span class="main">US Elite Baseball</span>
      <span class="sub">Uncommon Standards</span>
    </div>
  </a>
  <ul class="nav-links">
    <li><a href="index.html" class="active">US Elite Teams</a></li>
    <li><a href="#">Commitments</a></li>
    <li><a href="#">Tryouts</a></li>
    <li><a href="#">Privacy Policy</a></li>
  </ul>
</nav>

<div class="hero">
  <h1>Find <span>US Elite</span> Teams</h1>
  <p>Search by state, age group, or team name</p>
  <div class="search-wrap">
    <input type="text" id="search-input" placeholder="Search teams, states, age groups…" autocomplete="off">
    <button class="search-btn" onclick="applyFilters()">Search</button>
  </div>
</div>

<div class="main">
  <div class="filter-bar">
    <label>State:</label>
    <select class="state-filter" id="state-filter" onchange="applyFilters()">
      <option value="">All States</option>
    </select>
    <button class="clear-btn" id="clear-btn" onclick="clearFilters()">✕ Clear</button>
    <span class="result-count" id="result-count"></span>
  </div>

  <div class="teams-grid" id="teams-grid">
    <div class="skeleton"></div><div class="skeleton"></div>
    <div class="skeleton"></div><div class="skeleton"></div>
    <div class="skeleton"></div><div class="skeleton"></div>
  </div>
</div>

<footer>
  <div class="footer-links">
    <a href="#">US Elite Teams</a><a href="#">Commitments</a><a href="#">Privacy Policy</a>
    <a href="#">Prospect Form</a><a href="#">Tryouts</a><a href="#">Coach Application</a>
    <a href="#">Mission Statement</a><a href="#">Contact US Elite</a>
  </div>
  <p>We are always looking for new talent. Do you feel you have what it takes?<br>
    <a href="#">Click here to register for an upcoming tryout!</a></p>
  <p style="margin-top:.8rem;color:rgba(255,255,255,.35)">
    Copyright &copy; 2026 US Elite Baseball &nbsp;&middot;&nbsp;
    <a href="mailto:support@uselitebaseball.com">support@uselitebaseball.com</a>
  </p>
</footer>

<script>
'use strict';
const API_BASE = 'https://baseball-backend-five.vercel.app';

const ABBR_TO_NAME = {
  "AL":"Alabama","AK":"Alaska","AZ":"Arizona","AR":"Arkansas","CA":"California",
  "CO":"Colorado","CT":"Connecticut","DE":"Delaware","FL":"Florida","GA":"Georgia",
  "HI":"Hawaii","ID":"Idaho","IL":"Illinois","IN":"Indiana","IA":"Iowa",
  "KS":"Kansas","KY":"Kentucky","LA":"Louisiana","ME":"Maine","MD":"Maryland",
  "MA":"Massachusetts","MI":"Michigan","MN":"Minnesota","MS":"Mississippi",
  "MO":"Missouri","MT":"Montana","NE":"Nebraska","NV":"Nevada","NH":"New Hampshire",
  "NJ":"New Jersey","NM":"New Mexico","NY":"New York","NC":"North Carolina",
  "ND":"North Dakota","OH":"Ohio","OK":"Oklahoma","OR":"Oregon","PA":"Pennsylvania",
  "RI":"Rhode Island","SC":"South Carolina","SD":"South Dakota","TN":"Tennessee",
  "TX":"Texas","UT":"Utah","VT":"Vermont","VA":"Virginia","WA":"Washington",
  "WV":"West Virginia","WI":"Wisconsin","WY":"Wyoming"
};

function esc(s){return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');}

let ALL_TEAMS = [];

async function loadAllTeams() {
  const STATES = Object.keys(ABBR_TO_NAME);
  const grid = document.getElementById('teams-grid');
  try {
    // Fetch in batches of 10 states at a time to avoid overwhelming the backend
    ALL_TEAMS = [];
    const BATCH_SIZE = 10;
    for (let i = 0; i < STATES.length; i += BATCH_SIZE) {
      const batch = STATES.slice(i, i + BATCH_SIZE);
      const results = await Promise.allSettled(
        batch.map(abbr =>
          fetch(`${API_BASE}/api/teams?state=${abbr}`)
            .then(r=>r.json()).then(d=>d.teams||[]).catch(()=>[])
        )
      );
      results.forEach(r => { if(r.status==='fulfilled') ALL_TEAMS.push(...r.value); });
    }

    // Sort by full state name, then team name
    ALL_TEAMS.sort((a,b)=>{
      const sa = ABBR_TO_NAME[a.state]||a.state;
      const sb = ABBR_TO_NAME[b.state]||b.state;
      if(sa!==sb) return sa.localeCompare(sb);
      return (a.teamName||'').localeCompare(b.teamName||'');
    });

    // Populate state dropdown with only states that have teams
    const sf = document.getElementById('state-filter');
    const usedStates = [...new Set(ALL_TEAMS.map(t=>t.state))].sort((a,b)=>
      (ABBR_TO_NAME[a]||a).localeCompare(ABBR_TO_NAME[b]||b)
    );
    usedStates.forEach(abbr=>{
      const o=document.createElement('option');
      o.value=abbr; o.textContent=ABBR_TO_NAME[abbr]||abbr;
      sf.appendChild(o);
    });

    renderTeams(ALL_TEAMS);
  } catch(err) {
    grid.innerHTML=`<div class="error-state"><strong>⚠️ Failed to load teams</strong>${esc(err.message)}</div>`;
  }
}

function renderTeams(teams) {
  const grid = document.getElementById('teams-grid');
  const countEl = document.getElementById('result-count');
  countEl.textContent = `${teams.length} team${teams.length!==1?'s':''}`;

  if(!teams.length){
    grid.innerHTML=`<div class="empty-state"><strong>No teams found</strong>Try adjusting your search or filter.</div>`;
    return;
  }
  grid.innerHTML='';
  teams.forEach(team=>{
    const fullState = ABBR_TO_NAME[team.state]||team.state;
    const ageLine = team.ageGroup ? `<div class="tc-age">${esc(team.ageGroup)}</div>` : '';
    const params = new URLSearchParams({id:team.id, name:team.teamName, state:team.state});
    const card = document.createElement('a');
    card.className='team-card';
    card.href=`team.html?${params}`;
    card.innerHTML=`${ageLine}<div class="tc-name">${esc(team.teamName)}</div><div class="tc-state">${esc(fullState)}</div>`;
    grid.appendChild(card);
  });
}

function applyFilters() {
  const sv = document.getElementById('state-filter').value;
  const qv = document.getElementById('search-input').value.trim().toLowerCase();
  const filtered = ALL_TEAMS.filter(t=>{
    const fullState=(ABBR_TO_NAME[t.state]||t.state).toLowerCase();
    const matchState=!sv||t.state===sv;
    const matchSearch=!qv||
      (t.teamName||'').toLowerCase().includes(qv)||
      fullState.includes(qv)||
      t.state.toLowerCase().includes(qv)||
      (t.ageGroup||'').toLowerCase().includes(qv);
    return matchState&&matchSearch;
  });
  document.getElementById('clear-btn').classList.toggle('visible',!!(sv||qv));
  renderTeams(filtered);
}

function clearFilters(){
  document.getElementById('state-filter').value='';
  document.getElementById('search-input').value='';
  document.getElementById('clear-btn').classList.remove('visible');
  renderTeams(ALL_TEAMS);
}

document.getElementById('search-input').addEventListener('input', applyFilters);
document.getElementById('search-input').addEventListener('keydown', e=>{if(e.key==='Enter')applyFilters();});

loadAllTeams();
</script>
</body>
</html>
